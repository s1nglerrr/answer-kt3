ТЕХНИЧЕСКАЯ ДОКУМЕНТАЦИЯ - "СВЯТОЕ ОГНИЩЕ"

1. ОБЩЕЕ ОПИСАНИЕ

Святое Огнище - 2D rogue-lite платформер с процедурно генерируемыми руинами и системой магических рун. Игровой цикл строится вокруг коротких заходов (10-20 мин), сбора реликвий/рун и постепенного усиления персонажа.
Цели разработки: отзывчивое платформенное управление, высокая реиграбельность, простая интеграция процедурной генерации.

2. ИГРОВАЯ МЕХАНИКА

2.1 Управление и физика
Действия: ходьба, двойной прыжок, скольжение по стенам, рывок.
Поддержка "coyote time" и буфера прыжка.
Dash с краткой неуязвимостью.

2.2 Магическая система
Стихии: Огонь, Ветер, Земля, Молния, Вода (стандартный набор).
Руны - предметы, устанавливаются в слоты, дают активные/пассивные эффекты.
Мета-прогресс: улучшение слотов, открытие новых рун, улучшение уже имеющихся рун.

2.3 Враги и боссы
Типы врагов: патрульные - рандомно ходят по уровню, дальнобойные - стоят на месте, проверяют деапозон на наличие игрока, летающие - перемещаются и атакуют с воздуха.
AI: простые FSM (Idle, Patrol, Alert, Chase, Attack).
Боссы с фазами и изменением поведения по порогам HP.

3. ПРОЦЕДУРНАЯ ГЕНЕРАЦИЯ

3.1 Модули комнат
Каждая комната описана JSON-файлом: входы/выходы, биом, длина, сложность, точки спавна, микромеханики.

3.2 Алгоритм генерации
1. Получение seed.
2. Выбор биома и профиля сложности.
3. Склейка совместимых комнат.
4. Проверка валидности пути.
5. Расстановка врагов и предметов по таблицам.

4. СИСТЕМЫ И АРХИТЕКТУРА

4.1 Форматы данных
rooms/*.json - модули уровней
runes/*.json - руны
enemies/*.json - враги
...
Вся важная хранимая информация разбита и укомплектована по .json файлам.

4.2 "Контракты" между подсистемами
Генератор -> Сцена: список комнат + таблица спавна.
Рунная система -> Игрок: набор активных эффектов.
AI -> Уровень: точки пути, зоны агро.

4.3 Сохранение
Мета-прогресс сохраняется постоянно.
Прогресс внутри захода - частично, через чекпоинты.

5. АРТ И ЗВУК

Рисованная 2D графика, параллакс 2-4 слоя.
Частицы для магии и разрушений.
Динамическая музыка (глубина/опасность).

6. ПРОИЗВОДИТЕЛЬНОСТЬ И ПЛАТФОРМЫ

Цель: 60 FPS на мобильных.
Оптимизации: батчинг спрайтов, пул объектов.
Платформы: iOS/Android, далее PC и Switch.

7. MVP (МИНИМАЛЬНЫЙ СОСТАВ)

6-8 комнатных модулей.
3 биома.
6 типов врагов + 1-2 босса.
Базовая система рун (3 слота).
Генератор уровней + базовый UI/HUD.
